#youtang前端架构方案

----

##初始化项目

#####grunt
使用grunt对项目进行构建。

安装nodejs环境，通过``template``初始化grunt项目

	初始化依赖插件
	1. stylus -- css构建
	2. cmd-transport -- 依赖seajs的项目依赖解决方案
	3. concat -- js合并
	4. uglify -- 文件压缩混淆
	5. jshint -- js合法性检查
	6. watch -- 自动构建

##开发

#####CSS开发

使用style进行开发，将模块粒度分到最细。

可以包括以下几类，仅作参考：

- layout : 布局
- button : 按钮
- element : 通用元素大类，类似于``订单``,``浮层``,``相册``类等

在具体的业务中，根据项目构建文件夹和文件。项目中也可以区分``element``和``page``。

最终的css都要落实到``page``中。


#####js开发

全站使用``seajs``来组织代码。

``jquery``作为开发工具。可以使用基于``jQuery``的``seajs``模块，包装方法见：

- [模块包装方法](https://github.com/seajs/seajs/issues/971)
- [seajs官方包装的一些模块](https://github.com/cmdjs/gallery)


在个别项目中，可以使用合适的框架，例如[``angularjs``](http://angularjs.org)可以适用于搜索和订单这种交互较多的项目中。``raphael``可以使用在需要表现图表的项目中。

##调试

由于在初始化项目时，已经调用``watch``插件，所以会自动合并css和js。
在开发过程中，也可以自己调用``watch``命令，进行自动合并。

##构建

*所有模块文件要按照更新规模打上版本号。*

基本原则是，如果不影响之前的引用，只是做了一些微调，例如删除一些无用的方法或参数，可以不用打版本号。
其余情况，例如添加了新的API或者修改了内部的实现，则应该将模块的版本进行升级。

具体的升级机制可以根据发布版本来自动更新。

##文件夹部署

	dev 	--- 开发文件夹
	dist 	--- 发布文件夹（要确保发布到这个文件夹下的文件都是经过测试，并且合并之后的）
	debug 	--- 测试文件夹，开发完成之后，或者开发进行的过程中，所有的文件都应该合并到这个文件夹中，在确保无误的情况之下。再deploy到dist文件夹中，为上线做准备。
	
	ps：以上三个文件夹只是针对不同开发阶段，里面的文件配置都是一样的。原则上，开发者只需要关注dev文件夹即可，提交到test和debug都是通过grunt自动部署过去的。






